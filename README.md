# Проектная работа "Веб-ларек"

[Макет](https://www.figma.com/file/50YEgxY8IYDYj7UQu7yChb/Веб-ларёк?type=design&node-id=1-503&mode=design&t=scMpu2kscKdTdD0E-0)

Структура проекта:

- src/ — исходники
- src/components/ — JS компоненты
- src/components/base/ — базовый код
- src/components/models/ - модели
- src/components/views/ - вьюшки

Важные файлы:

- src/index.ts — точка входа
- src/types/index.ts — типы данных
- src/pages/index.html — главная страница
- src/scss/styles.scss — стили
- src/utils/utils.ts — утилиты
- src/utils/constants.ts — константы

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

Предварительно надо вставить макет в postman
гайд по настройке проекта:
https://practicum.yandex.ru/learn/associated-programs-frontend-st/courses/6602b296-01df-414c-8aa1-fcac9aae9781/sprints/401101/topics/334b7c9e-2242-4642-a876-bf6531efbe89/lessons/598e9e21-a3a3-4a37-a81e-ede38cdc45cd/
---

## Основные компоненты

### 1. Класс `Api`

Базовый модуль для работы с веб-сервером, поддерживающий два типа операций: безопасные (GET-запросы) и изменяющие данные (POST, DELETE).

### 2. Класс `Components`

Фундаментальный класс для создания моделей представления. Обеспечивает базовые функции управления DOM-элементами, включая манипуляции с классами, изменение текстового содержимого и другие операции.

### 3. Класс `EventEmitter`

Работа с событиями. Позволяет:
- Подписываться на события (`on`)
- Отписываться от событий (`off`)
- Инициировать события (`emit`)

Также включает дополнительные методы:
- `onAll` — подписка на все события
- `offAll` — полная очистка подписок

### 4. Класс `Model`

Базовый класс для моделей данных. Автоматически связывает входные данные со свойствами объекта (в конструкторе) и предоставляет метод `emitChanges` для генерации именованных событий.

---

## Модели данных (бизнес-логика)

### 1. Класс `AppState`

Хранит глобальное состояние приложения со следующими ключевыми свойствами:
- `catalog` — список доступных товаров (изменение вызывает событие `catalog:changed`)
- `basket` — содержимое корзины
- `order` — данные о заказе
- `preview` — товар, просматриваемый в модальном окне

Включает вспомогательные методы для работы с этими свойствами.

### 2. Класс `ShopItem`

Модель отдельной товарной карточки. Структура данных определяется API сервера, дополнена логикой работы с корзиной через событие `lot:changed`.

### 3. Класс `Order`

Модель процесса оформления заказа:
- Отслеживает данные полей формы
- Реализует базовую валидацию
- Генерирует событие `formErrors:changed` при изменениях

---

## Компоненты интерфейса

### 1. Класс `Page`

Управляет основными элементами страницы:
- `counter` — индикатор количества товаров в корзине
- `gallery` — контейнер товаров
- `wrapper` — блокировка прокрутки при открытых модальных окнах
- `basket` — кнопка корзины (генерирует `basket:open`)

### 2. Класс `Modal`

Базовый компонент модальных окон:
- `content` — содержимое окна
- `closeButton` — кнопка закрытия

Обрабатывает события закрытия (`modal:close`) по клику на кнопку или фон.

### 3. Класс `Basket`

Представление корзины:
- `list` — список товаров
- `button` — кнопка оформления заказа (инициирует `order_payment:open`)

### 4. Класс `Card`

### 5. Класс `BasketItem`

Элемент корзины с параметрами:
- `index` — позиция в списке
- `title` — наименование
- `price` — цена
- `deleteBtn` — кнопка удаления

### 6. Класс `Form`

Базовая форма с элементами:
- `submit` — кнопка отправки
- `errors` — блок ошибок

Обрабатывает события изменения полей (`container.field:change`) и отправки формы (`container:submit`).

### 7. Класс `DeliveryForm`

Наследник `Form` для данных доставки:
- `payment` — способ оплаты
- `address` — адрес

### 8. Класс `ContactsForm`

Наследник `Form` для контактных данных:
- `email` — электронная почта
- `phone` — телефон

### 9. Класс `Success`

Отображение информации об успешном оформлении заказа.

---

## Работа с API

### 1. Класс `LarekAPI`

Специализированный клиент API с методами:
- `getLarekItem` — получение данных о товаре
- `getLarekList` — список всех товаров
- `postOrderLots` — оформление заказа